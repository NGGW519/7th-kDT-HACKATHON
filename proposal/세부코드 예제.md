# 고향으로 ON - 세부 코드 예제 모음 (확장)

## ✅ Django 인증 및 JWT 예제 (users/views.py)

```python
from rest_framework_simplejwt.views import TokenObtainPairView
from rest_framework_simplejwt.serializers import TokenObtainPairSerializer

class CustomTokenObtainPairSerializer(TokenObtainPairSerializer):
    @classmethod
    def get_token(cls, user):
        token = super().get_token(user)
        token['user_type'] = user.user_type
        return token

class CustomTokenObtainPairView(TokenObtainPairView):
    serializer_class = CustomTokenObtainPairSerializer
```

## ✅ Django 커뮤니티 모델 및 뷰 예제 (community/models.py)

```python
from django.db import models
from users.models import User

class Post(models.Model):
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    title = models.CharField(max_length=255)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

class Comment(models.Model):
    post = models.ForeignKey(Post, related_name='comments', on_delete=models.CASCADE)
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
```

## ✅ Django 커뮤니티 ViewSet 예제 (community/views.py)

```python
from rest_framework import viewsets
from .models import Post, Comment
from .serializers import PostSerializer, CommentSerializer

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer

class CommentViewSet(viewsets.ModelViewSet):
    queryset = Comment.objects.all()
    serializer_class = CommentSerializer
```

## ✅ React Native 인증 연동 예제 (mobile/src/services/authService.js)

```javascript
import axios from 'axios';

const API_URL = 'https://api.gohyangon.com/api/token/';

export const login = async (username, password) => {
  try {
    const response = await axios.post(API_URL, {
      username,
      password,
    });
    return response.data;
  } catch (error) {
    throw error;
  }
};
```

## ✅ React Native 미션 화면 예제 (mobile/src/screens/MissionScreen.js)

```javascript
import React, { useEffect, useState } from 'react';
import { View, Text, FlatList } from 'react-native';
import axios from 'axios';

export default function MissionScreen() {
  const [missions, setMissions] = useState([]);

  useEffect(() => {
    axios.get('https://api.gohyangon.com/api/missions/')
      .then(response => setMissions(response.data))
      .catch(error => console.error(error));
  }, []);

  return (
    <View>
      <Text>추천 미션 목록</Text>
      <FlatList
        data={missions}
        keyExtractor={(item) => item.id.toString()}
        renderItem={({ item }) => (
          <View>
            <Text>{item.title}</Text>
            <Text>{item.description}</Text>
          </View>
        )}
      />
    </View>
  );
}
```

